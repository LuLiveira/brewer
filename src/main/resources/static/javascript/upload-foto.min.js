var Brewer=Brewer||{};Brewer.UploadFoto=function(){function o(){this.inputNomeFoto=$("input[name=foto]"),this.inputContentType=$("input[name=contentType]"),this.divFotoCerveja=$("#foto-cerveja").html(),this.template=Handlebars.compile(this.divFotoCerveja),this.uploadDrop=$("#upload-drop"),this.containerCerveja=$(".js-container-foto-cerveja")}function e(o){null==o.response.nome&&null==o.response.contentType&&(response=JSON.parse(o.response)),this.inputNomeFoto.val(response.nome),this.inputContentType.val(response.contentType),this.uploadDrop.addClass("hidden");var e=this.template({nomeFoto:response.nome});this.containerCerveja.append(e),$(".js-remove-foto").on("click",function(){$(".js-foto-cerveja").remove(),this.uploadDrop.removeClass("hidden"),$.ajax({url:"http://localhost:8080/brewer/cervejas/cadastro/foto/remover",method:"DELETE",contentType:"application/json",data:JSON.stringify({nomeFotoJson:this.inputNomeFoto.val()}),error:function(){alert("Erro removendo foto")}.bind(this),success:function(){alert("Success removendo foto")}.bind(this)}),this.inputNomeFoto.val(""),this.inputContentType.val("")}.bind(this))}return o.prototype.iniciar=function(){var o={type:"json",filelimit:1,allow:"*.(jpg|jpeg|png)",url:this.containerCerveja.data("url-fotos"),complete:e.bind(this)};UIkit.upload($("#upload-select"),o),UIkit.upload(this.uploadDrop,o),this.inputNomeFoto.val()&&e.call(this,{nome:this.inputNomeFoto.val(),contentType:this.inputContentType.val()})},o}(),$(function(){(new Brewer.UploadFoto).iniciar()});